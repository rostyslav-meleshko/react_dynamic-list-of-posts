(this.webpackJsonpinquire_test_task=this.webpackJsonpinquire_test_task||[]).push([[0],{15:function(e,t,n){},20:function(e,t,n){e.exports=n(37)},31:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),s=n(1),l=n(19),u=n(5),i=n(6),m=n(17),p=n(18);var b=function(e){var t=e.title,n=e.body;return fetch("https://bloggy-api.herokuapp.com/posts",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({title:t,body:n}),redirect:"follow"})},f=function(e){return fetch("https://bloggy-api.herokuapp.com/posts/".concat(e),{method:"DELETE",headers:{"Content-type":"application/json"}})};function d(e,t){if(0!==e)return fetch("https://bloggy-api.herokuapp.com/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:e,body:t})})}var h=function(e){return e.posts},E=function(e){return e.postId},v={posts:[],postId:0},y=function(){return function(e){fetch("https://bloggy-api.herokuapp.com/posts").then((function(e){return e.json()})).then((function(t){e(function(e){return{type:"SET_POSTS",posts:e}}(t))}))}},O=Object(i.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":return Object(u.a)(Object(u.a)({},e),{},{posts:Object(l.a)(t.posts)});case"SET_POST_ID":return Object(u.a)(Object(u.a)({},e),{},{postId:t.postId});default:return e}}),Object(m.composeWithDevTools)(Object(i.applyMiddleware)(p.a))),_=(n(31),n(32),n(2)),j=n.n(_),N=n(4),g=(n(34),function(){var e=Object(s.b)(),t=Object(s.c)(h),n=function(){var t=Object(N.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(n);case 2:e(y());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"PostsList"},r.a.createElement("h2",null,"Posts:"),r.a.createElement("div",null,r.a.createElement("ul",{className:"PostsList__list"},t.map((function(t){return r.a.createElement("li",{className:"PostsList__item",key:t.id},r.a.createElement("div",null,r.a.createElement("b",null,"[Post #".concat(t.id,"]: ")),t.title),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){return n=t.id,void e(function(e){return{type:"SET_POST_ID",postId:e}}(n));var n}},"Show Details"),r.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){return n(t.id)}},"Delete Post")))})))))}),w=n(3),S=(n(35),function(){return r.a.createElement("div",{className:"Loader"},r.a.createElement("div",{className:"Loader__content"}))}),k=(n(36),n(15),function(){var e=Object(s.c)(E),t=Object(a.useState)(""),n=Object(w.a)(t,2),c=n[0],o=n[1],l=function(){var t=Object(N.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!(c.trim().length>0)){t.next=5;break}return t.next=4,d(e,c);case 4:o("");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"NewCommentForm",onSubmit:function(e){return l(e)}},r.a.createElement("div",{className:"form-field"},r.a.createElement("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:c,onChange:function(e){return o(e.target.value)}})),r.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button",disabled:!(c.trim().length>0)},"Add a comment")))}),C=function(){var e=Object(s.b)(),t=Object(s.c)(E),n=Object(a.useState)({}),c=Object(w.a)(n,2),o=c[0],l=c[1],u=Object(a.useState)(""),i=Object(w.a)(u,2),m=i[0],p=i[1],b=Object(a.useState)(""),f=Object(w.a)(b,2),d=f[0],h=f[1],v=Object(a.useState)(!1),O=Object(w.a)(v,2),_=O[0],g=O[1],C=Object(a.useCallback)(Object(N.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://bloggy-api.herokuapp.com/posts/".concat(t)).then((function(e){return e.json()}));case 2:n=e.sent,l(n),p(n.title),h(n.body);case 6:case"end":return e.stop()}}),e)}))),[t]);Object(a.useEffect)((function(){C()}),[C]);var P=function(){var n=Object(N.a)(j.a.mark((function n(a){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),!m.trim()||!d.trim()){n.next=9;break}return n.next=4,r=m,c=d,fetch("https://bloggy-api.herokuapp.com/posts/".concat(t),{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({title:r,body:c}),redirect:"follow"});case 4:g(!1),e(y()),C(),n.next=10;break;case 9:g(!1);case 10:case"end":return n.stop()}var r,c}),n)})));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("div",{className:"PostDetails"},r.a.createElement("h2",null,"Post details:"),_?r.a.createElement("form",{className:"NewCommentForm",onSubmit:function(e){return P(e)}},r.a.createElement("div",{className:"form-field"},r.a.createElement("input",{name:"title",placeholder:"Type titlr here",className:"NewCommentForm__input",value:m,onChange:function(e){return p(e.target.value)}})),r.a.createElement("div",{className:"form-field"},r.a.createElement("textarea",{name:"body",placeholder:"Type post here",className:"NewCommentForm__input",value:d,onChange:function(e){return h(e.target.value)}})),r.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button"},"Update post")):r.a.createElement("section",{className:"PostDetails__post"},r.a.createElement("h3",null,r.a.createElement("em",null,o.title)),o.body?r.a.createElement("p",null,o.body):r.a.createElement(S,null),r.a.createElement("button",{type:"button",className:"button",onClick:function(){return g(!0)}},"Edit post")),r.a.createElement("section",null,r.a.createElement("div",{className:"PostDetails__form-wrapper"},r.a.createElement(k,null))))},P=n(10),x=function(){var e=Object(s.b)(),t=Object(a.useState)(!0),n=Object(w.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)({title:"",body:""}),i=Object(w.a)(l,2),m=i[0],p=i[1],f=function(e){var t=e.name,n=e.value;p((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(P.a)({},t,n))})),o(!0)},d=function(){var t=Object(N.a)(j.a.mark((function t(n){var a,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=m.title,r=m.body,n.preventDefault(),!(a.trim().length>0&&r.trim().length>0)){t.next=10;break}return t.next=5,b(m);case 5:p({title:"",body:""}),o(!0),e(y()),t.next=11;break;case 10:o(!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"NewCommentForm",onSubmit:function(e){return d(e)}},r.a.createElement("div",{className:"form-field"},r.a.createElement("input",{type:"text",name:"title",placeholder:"Post title",className:"NewCommentForm__input",value:m.title,onChange:function(e){return f(e.target)}})),r.a.createElement("div",{className:"form-field"},r.a.createElement("textarea",{name:"body",placeholder:"Type post here",className:"NewCommentForm__input",value:m.body,onChange:function(e){return f(e.target)}})),r.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button"},"Add new post")),!c&&r.a.createElement("div",{className:"alarm"},r.a.createElement("p",null,"Fields should not be empty")))},T=function(){var e=Object(s.b)(),t=Object(s.c)(E);function n(){e(y())}return Object(a.useEffect)((function(){n()}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App__header App__form-wrapper"},r.a.createElement(x,null)),r.a.createElement("main",{className:"App__main"},r.a.createElement("div",{className:"App__sidebar"},r.a.createElement(g,null)),!!t&&r.a.createElement("div",{className:"App__content"},r.a.createElement(C,{postId:t,fetchPosts:n}))))};o.a.render(r.a.createElement(s.a,{store:O},r.a.createElement(T,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.2d26595b.chunk.js.map